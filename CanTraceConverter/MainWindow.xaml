<Window x:Class="CanTraceConverter.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:local="clr-namespace:CanTraceConverter"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        Title="USB-CAN Trace Converter"
        Width="950"
        Height="650"
        MinWidth="800"
        MinHeight="500"
        Background="#F5F5F5" WindowStartupLocation="CenterScreen" WindowState="Maximized"
        FontFamily="Segoe UI"
        FontSize="16"
        mc:Ignorable="d">
  <Window.Resources>
    <!--  Modern Button Style  -->
    <Style x:Key="ModernButton"
           TargetType="Button">
      <Setter Property="Background"
              Value="#0078D4" />
      <Setter Property="Foreground"
              Value="White" />
      <Setter Property="BorderThickness"
              Value="0" />
      <Setter Property="Padding"
              Value="16,8" />
      <Setter Property="FontWeight"
              Value="SemiBold" />
      <Setter Property="Cursor"
              Value="Hand" />
      <Setter Property="Template">
        <Setter.Value>
          <ControlTemplate TargetType="Button">
            <Border Background="{TemplateBinding Background}"
                    BorderBrush="{TemplateBinding BorderBrush}"
                    BorderThickness="{TemplateBinding BorderThickness}"
                    CornerRadius="4">
              <ContentPresenter HorizontalAlignment="Center"
                                VerticalAlignment="Center" />
            </Border>
          </ControlTemplate>
        </Setter.Value>
      </Setter>
      <Style.Triggers>
        <Trigger Property="IsMouseOver"
                 Value="True">
          <Setter Property="Background"
                  Value="#005A9E" />
        </Trigger>
        <Trigger Property="IsEnabled"
                 Value="False">
          <Setter Property="Background"
                  Value="#CCCCCC" />
          <Setter Property="Foreground"
                  Value="#666666" />
        </Trigger>
      </Style.Triggers>
    </Style>

    <!--  Secondary Button Style  -->
    <Style x:Key="SecondaryButton"
           TargetType="Button">
      <Setter Property="Background"
              Value="White" />
      <Setter Property="Foreground"
              Value="#333333" />
      <Setter Property="BorderBrush"
              Value="#CCCCCC" />
      <Setter Property="BorderThickness"
              Value="1" />
      <Setter Property="Padding"
              Value="16,8" />
      <Setter Property="FontWeight"
              Value="Normal" />
      <Setter Property="Cursor"
              Value="Hand" />
      <Setter Property="Template">
        <Setter.Value>
          <ControlTemplate TargetType="Button">
            <Border Background="{TemplateBinding Background}"
                    BorderBrush="{TemplateBinding BorderBrush}"
                    BorderThickness="{TemplateBinding BorderThickness}"
                    CornerRadius="4">
              <ContentPresenter HorizontalAlignment="Center"
                                VerticalAlignment="Center" />
            </Border>
          </ControlTemplate>
        </Setter.Value>
      </Setter>
      <Style.Triggers>
        <Trigger Property="IsMouseOver"
                 Value="True">
          <Setter Property="Background"
                  Value="LightBlue" />
          <Setter Property="BorderBrush"
                  Value="#999999" />
        </Trigger>
        <Trigger Property="IsEnabled"
                 Value="False">
          <Setter Property="Background"
                  Value="LightGray" />
          
        </Trigger>
      </Style.Triggers>
    </Style>

    <!--  Modern TextBox Style  -->
    <Style x:Key="ModernTextBox"
           TargetType="TextBox">
      <Setter Property="Padding"
              Value="10,8" />
      <Setter Property="BorderBrush"
              Value="#CCCCCC" />
      <Setter Property="BorderThickness"
              Value="1" />
      <Setter Property="Background"
              Value="White" />
      <Setter Property="VerticalContentAlignment"
              Value="Center" />
      <Setter Property="Template">
        <Setter.Value>
          <ControlTemplate TargetType="TextBox">
            <Border Background="{TemplateBinding Background}"
                    BorderBrush="{TemplateBinding BorderBrush}"
                    BorderThickness="{TemplateBinding BorderThickness}"
                    CornerRadius="4">
              <ScrollViewer x:Name="PART_ContentHost" />
            </Border>
          </ControlTemplate>
        </Setter.Value>
      </Setter>
      <Style.Triggers>
        <Trigger Property="IsFocused"
                 Value="True">
          <Setter Property="BorderBrush"
                  Value="#0078D4" />
          <Setter Property="BorderThickness"
                  Value="2" />
        </Trigger>
      </Style.Triggers>
    </Style>
  </Window.Resources>

  <Grid>
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto" />
      <RowDefinition Height="*" />
      <RowDefinition Height="Auto" />
    </Grid.RowDefinitions>

    <!--  Header Section  -->
    <Border Grid.Row="0"
            Padding="24,20"
            Background="White"
            BorderBrush="#E0E0E0"
            BorderThickness="0,0,0,1">
      <Grid>
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="Auto" />
          <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>
        <Viewbox Grid.Column="0"
                 Width="40"
                 Height="40"
                 Margin="0,0,16,0">
          <Image 
                  Source="Images/logo.png">
            
          </Image>
        </Viewbox>
        <StackPanel Grid.Column="1"
                    VerticalAlignment="Center">
          <TextBlock FontSize="20"
                     FontWeight="SemiBold"
                     Foreground="#333333">
            USB-CAN Trace Converter
          </TextBlock>
          <TextBlock Margin="0,4,0,0"
                     FontSize="13"
                     Foreground="#666666">
            Convert binary USB-CAN trace files (.ucantrc) to readable text format
          </TextBlock>
        </StackPanel>
      </Grid>
    </Border>

    <!--  Main Content  -->
    <Grid Grid.Row="1"
          Margin="24,20,24,0">
      <Grid.RowDefinitions>
        <RowDefinition Height="Auto" />
        <RowDefinition Height="*" />
        <RowDefinition Height="Auto" />
      </Grid.RowDefinitions>

      <!--  Input/Output Files Section  -->
      <Border Grid.Row="0"
              Padding="20"
              Background="White"
              BorderBrush="#E0E0E0"
              BorderThickness="1"
              CornerRadius="6">
        <Grid>
          <Grid.ColumnDefinitions>
            <ColumnDefinition Width="100" />
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="110" />
          </Grid.ColumnDefinitions>
          <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
          </Grid.RowDefinitions>

          <TextBlock Grid.Row="0"
                     Grid.Column="0"
                     Margin="0,0,0,12"
                     VerticalAlignment="Center"
                     FontWeight="Medium"
                     Foreground="#333333">
            Input File:
          </TextBlock>
          <TextBox x:Name="txtInputFile"
                   Grid.Row="0"
                   Grid.Column="1"
                   Margin="0,0,12,12"
                   Style="{StaticResource ModernTextBox}" />
          <Button x:Name="btnBrowseInput"
                  Grid.Row="0"
                  Grid.Column="2"
                  Margin="0,0,0,12"
                  Click="btnBrowseInput_Click"
                  Content="Browse..."
                  Style="{StaticResource SecondaryButton}" />

          <TextBlock Grid.Row="1"
                     Grid.Column="0"
                     Margin="0,0,0,12"
                     VerticalAlignment="Center"
                     FontWeight="Medium"
                     Foreground="#333333">
            Output File:
          </TextBlock>
          <TextBox x:Name="txtOutputFile"
                   Grid.Row="1"
                   Grid.Column="1" TextChanged="TxtOutputFile_OnTextChanged"
                   Margin="0,0,12,12"
                   Style="{StaticResource ModernTextBox}" />
          <Button x:Name="btnBrowseOutput"
                  Grid.Row="1"
                  Grid.Column="2"
                  Margin="0,0,0,12"
                  Click="btnBrowseOutput_Click"
                  Content="Browse..."
                  Style="{StaticResource SecondaryButton}" />

          <CheckBox x:Name="chkDiffTime"
                    Grid.Row="2"
                    Grid.Column="1"
                    Grid.ColumnSpan="2"
                    Margin="0,8,0,0"
                    VerticalAlignment="Center"
                    Content="Show differential time (time since previous message)"
                    Foreground="#333333" />
        </Grid>
      </Border>

      <!--  Output Display  -->
      <Border Grid.Row="1"
              Margin="0,16,0,0"
              Background="White"
              BorderBrush="#E0E0E0"
              BorderThickness="1"
              CornerRadius="6">
        <Grid>
          <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
          </Grid.RowDefinitions>

          <Border Grid.Row="0"
                  Padding="16,12"
                  Background="#FAFAFA"
                  BorderBrush="#E0E0E0"
                  BorderThickness="0,0,0,1">
            <TextBlock FontWeight="SemiBold"
                       Foreground="#333333"
                       Text="Conversion Output" />
          </Border>

          <Border Grid.Row="1"
                  Padding="12">
            <!--<ScrollViewer HorizontalScrollBarVisibility="Auto" IsDeferredScrollingEnabled="True"
                          VerticalScrollBarVisibility="Auto">-->
              <TextBox x:Name="txtOutput"
                       AcceptsReturn="True"
                       Background="Transparent"
                       BorderThickness="0"
                       FontFamily="Consolas"
                       Foreground="#333333"
                       HorizontalScrollBarVisibility="Disabled"
                       IsReadOnly="True"
                       TextWrapping="NoWrap"
                       VerticalScrollBarVisibility="Auto" />
            <!--</ScrollViewer>-->
          </Border>
        </Grid>
      </Border>

      <!--  Action Buttons  -->
      <StackPanel Grid.Row="2"
                  Height="30"
                  Margin="0,8,0,8"
                  HorizontalAlignment="Right"
                  Orientation="Horizontal">
        <Button x:Name="btnOpenOutputDir"
                Width="150"
                Margin="0,0,12,0"
                Click="btnOpenOutputDir_Click"
                Content="Open Output Dir"
                Style="{StaticResource SecondaryButton}" />
        <Button x:Name="btnClearFiles"
                Width="110"
                Margin="0,0,12,0"
                Click="btnClearFiles_Click"
                Content="Clear Files"
                Style="{StaticResource SecondaryButton}" />
        <Button x:Name="btnClear"
                Width="120"
                Margin="0,0,12,0"
                Click="btnClear_Click"
                Content="Clear Output"
                Style="{StaticResource SecondaryButton}" />
        <Button x:Name="btnAnalyze"
                Width="120"
                Margin="0,0,12,0"
                Click="btnAnalyze_Click"
                Content="Analyze"
                Style="{StaticResource ModernButton}" />
        <Button x:Name="btnConvert"
                Width="120"
                Click="btnConvert_Click"
                Content="Convert"
                Style="{StaticResource ModernButton}" />
      </StackPanel>
    </Grid>

    <!--  Footer Section  -->
    <Border Grid.Row="2"
            Padding="24,16"
            Background="White"
            BorderBrush="#E0E0E0"
            BorderThickness="0,1,0,0">
      <Grid>
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="*" />
          <ColumnDefinition Width="Auto" />
        </Grid.ColumnDefinitions>

        <!--  Status Text  -->
        <TextBlock x:Name="txtStatus"
                   Grid.Column="0"
                   VerticalAlignment="Center"
                   FontSize="13"
                   Foreground="#666666"
                   Text="Ready" />

        <!--  Developed By  -->
        <StackPanel Grid.Column="1"
                    VerticalAlignment="Center"
                    Orientation="Horizontal">
          <TextBlock FontFamily="Segoe UI Light"
                     FontSize="13"
                     Foreground="#999999"
                     Text="Developed by " />
          <TextBlock FontFamily="Segoe UI Semibold"
                     FontSize="13"
                     Foreground="#0078D4"
                     Text="Umar Faruq Lilla" />
        </StackPanel>
      </Grid>
    </Border>
  </Grid>
</Window>